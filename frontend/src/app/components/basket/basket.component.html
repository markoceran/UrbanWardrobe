<app-header></app-header>
<div class="basket-page">
    <h4 class="title">Basket</h4>
    <div class="basket-card" *ngFor="let basketItem of basket.basketItems">
        <div class="basket-image">
            <img *ngIf="basketItem.product.images.length > 0" [src]="sanitizeUrl(basketItem.product.images[0])" alt="{{ basketItem.product.name }} image" class="product-image" (click)="openProductDetails(basketItem.product.code)">
        </div>
        <div class="basket-info">
            <h2>{{ basketItem.product.name }}</h2>
            <p>{{ basketItem.product.code }}</p>
            <p>{{ basketItem.size }}</p>
            <p><span *ngIf="basketItem.quantity > 1">{{ basketItem.quantity }}x </span><strong>€{{ basketItem.product.price }}</strong></p>
        </div>
        <div class="change-quantity" *ngIf="selectedBasketItemId === basketItem.id">
            <input type="number" [(ngModel)]="basketItem.quantity" min="1">
            <button>Change quantity</button>
        </div>
        <button class="options-btn" (click)="openFormForEdit(basketItem.id)"><i class="fas fa-pencil"></i></button>
        <button class="options-btn"> <i class="fas fa-trash-can"></i></button>
    </div>
    <div class="basket-card">
        <div class="basket-info-price">
            <p>Products amount: €{{ productsAmount }}</p>
            <p>Shipping amount: €{{ shippingAmount }}</p>
            <p><strong>Total: €{{ totalAmount }}</strong> </p>
        </div>
        <button class="buy-btn">Buy  <i class="fas fa-angles-right"></i></button>
    </div>
</div>

